# 创建日志告警监控规则

创建日志告警监控规则后，日志服务根据您定义的检查频率、触发条件等配置产生告警，并根据您所选择的告警策略和行动策略进行告警降噪和通知。

## 操作步骤

1.  登录[日志服务控制台](https://sls.console.aliyun.com)。

2.  在Project列表区域，单击目标Project。

3.  在**日志存储** \> **日志库**页签中，单击目标Logstore。

4.  在页面右上角，选择**另存为告警** \> **新版告警（公测中）**。

5.  在告警规则面板中，配置如下参数，单击**确定**。

    |参数|说明|
    |--|--|
    |**规则名称**|告警监控规则的名称。|
    |**检查频率**|日志服务根据您配置的频率对查询和分析结果进行检查。    -   **每小时**：每小时检查一次查询和分析结果。
    -   **每天**：在每天的某个固定时间点检查一次查询和分析结果。
    -   **每周**：在周几的某个固定时间点检查一次查询和分析结果。
    -   **固定间隔**：按照固定间隔检查查询和分析结果。
    -   **Cron**：通过Cron表达式指定时间间隔，按照指定的时间间隔检查查询和分析结果。

Cron表达式的最小精度为分钟，24小时制，例如0 0/1 \* \* \*从00:00开始，每隔1小时检查一次。 |
    |**查询统计**|配置查询和分析语句。配置多个查询统计时，您可以指定**集合操作**关联多个查询结果。更多信息，请参见[多集合操作机制]()。 |
    |**分组评估**|日志服务支持对查询和分析结果进行分组。    -   **标签自定义**：日志服务根据您配置的字段对查询和分析结果进行分组。分组后，每个组单独评估触发条件。在每个检查周期内，查询和分析结果满足触发条件时，各个分组各自产生一条告警。

您可配置多个字段，多个字段之间使用半角逗号（,）分隔。

    -   **不分组**：在每个检查周期内，满足触发条件时，只产生一条告警。
    -   **标签自动**：监控时序数据的查询和分析结果时 ，日志服务支持自动分组。 |
    |**触发条件**|配置触发告警的条件。    -   **有数据**：当查询和分析结果中存在数据时，触发告警。
    -   **有特定条数据**：当查询和分析结果中存在N条数据时，触发告警。
    -   **有数据匹配**：当查询和分析结果中存在数据满足评估表达式时，触发告警。
    -   **有特定条数据匹配**：当查询和分析结果中存在N条数据满足评估表达式时，触发告警。
更多信息，请参见[使用评估表达式设置触发条件]()。 |
    |**告警严重度**|配置告警的严重度。主要用于告警降噪控制和告警通知控制，即您在创建告警策略或行动策略时，可添加关于告警严重度的判断条件。更多信息，请参见[设置告警严重度]()。    -   简单配置：直接选择告警严重度，则表示通过该规则产生的告警都为同一严重度。
    -   分条件配置：单击**添加**，分条件设置告警严重度。条件表达式详情请参见[告警条件表达式语法](/intl.zh-CN/可视化与告警/告警/参考信息/告警条件表达式语法.md)。 |
    |**添加标签**|日志服务允许您给产生的告警添加标识性属性，键值对格式。主要用于告警降噪控制和告警通知控制，即您在创建告警策略或行动策略时，可添加关于标签的判断条件。更多信息，请参见[标签和标注]()。|
    |**添加标注**|日志服务允许您给产生的告警添加非标识性属性，键值对格式。主要用于告警降噪控制和告警通知控制，即您在创建告警策略或行动策略时，可添加关于标注的判断条件。更多信息，请参见[标签和标注]()。|
    |**自动添加标注**|打开**自动添加标注**开关后，自动在告警中添加\_\_count\_\_、\_\_topic\_\_等信息。更多信息，请参见[自动标注]()。|
    |**恢复通知**|打开**恢复通知**开关后，告警恢复时，触发一条恢复告警。其严重度与触发的告警保持一致。更多信息，请参见[恢复通知]()。|
    |**连续触发阈值**|配置连续触发阈值。当累计的触发次数达到该值时，产生一条告警。不满足触发条件时不计入统计。|
    |**无数据告警**|打开**无数据告警**开关后，如果查询和分析的结果（有多个时，进行集合操作后的结果）为无数据的次数超过**连续触发阈值**，则产生一条告警。更多信息，请参见[无数据告警]()。|
    |**告警策略**|告警策略用于合并、静默和抑制已产生的告警。    -   选择**极简模式**和**普通模式**时，您无需配置告警策略。日志服务默认使用SLS内置动态告警策略（sls.builtin.dynamic）进行告警管理。
    -   选择**高级模式**时，您可以选择内置的或自定义的告警策略进行告警管理。如何创建告警策略，请参见[创建告警策略](/intl.zh-CN/告警（新版）/告警管理/创建告警策略.md)。 |
    |**行动策略**|行动策略用于控制告警通知渠道和频率等。    -   当**告警策略**选择为**极简模式**时，您只需配置行动组即可。

您配置行动组后，日志服务自动为您创建一个名为`规则名称-行动策略`的行动策略。由该告警监控规则触发的所有告警都通过该行动策略发送通知。如何配置，请参见[通知渠道说明](/intl.zh-CN/告警（新版）/通知管理/通知渠道/通知渠道说明.md)。

**说明：** 您可以在行动策略管理页面，修改该行动策略。具体操作，请参见[创建行动策略](/intl.zh-CN/告警（新版）/通知管理/创建行动策略.md)。如果您在修改行动策略时添加了判断条件，则此处的**告警策略**将自动变更为**普通模式**。

    -   当**告警策略**选择为**普通模式**或**高级模式**时，您可以选择内置的或自定义的行动策略进行告警通知。如何创建行动策略，请参见[创建行动策略](/intl.zh-CN/告警（新版）/通知管理/创建行动策略.md)。

其中，您选择**告警策略**选择为**高级模式**时，还可以开启或关闭**自定义行动策略**。更多信息，请参见[动态行动策略机制](/intl.zh-CN/告警（新版）/告警管理/告警降噪控制/动态行动策略机制.md)。 |
    |**重复等待**|在重复等待时间内，重复的告警只触发一次行动策略，即只发送一次告警通知。|


