# 流图

本文介绍流图操作步骤及案例。

## 简介

流图（Flow Chart）也叫主题河流图（ThemeRiver），是围绕中心轴线进行布局的一种堆叠面积图。不同颜色的条带状分支代表了不同的分类信息，条状带的宽度映射了对应的数值大小。此外，原数据集中的时间属性，默认映射到X轴上，是一个三维关系的展现。

流图可以通过图表类型切换为线图和柱状图，需要注意的是柱状图默认以层叠形式展现，不同分类数据的起点是从上个柱状的顶部开始。

基本构成如下：

-   X轴（横轴）
-   Y轴（纵轴）
-   条状

## 使用步骤

1.  登录[日志服务控制台](https://sls.console.aliyun.com)。

2.  在Project列表区域，单击目标Project。

3.  在**日志管理** \> **日志库**页签中，单击目标Logstore右侧的**![日志库管理图标](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/9232359951/p52166.png)图标** \> **查询分析**。

4.  输入查询分析语句，选择时间范围后单击**查询/分析**。

5.  单击![流图-001](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/0012906951/p93124.png)，进入流图展示页面。

6.  在**属性配置**页签中，配置图表属性。

    |配置项|说明|
    |:--|:-|
    |图表类型|提供线图（默认）、面积图、以及柱状图（层叠）。|
    |X轴|一般为有序数据类别（时间序列）。|
    |Y轴|可以配置一列或多列数据对应到左轴数值区间。|
    |聚合列|需要在第三维上聚合的信息。|
    |详情列|鼠标悬浮在图表上，显示详情信息。|
    |图例位置|图例在图表中的位置，可以配置为上、下、左和右。|
    |格式化|将数据按照指定格式进行显示。|
    |是否显示点|开启该功能后，显示连接点。|
    |图例宽度|设置图例的宽度。|
    |X轴刻度密度|设置X轴的刻度密度。|
    |开启指标筛选|开启该功能后，可筛选指标维度。|
    |添加横线|开启该功能后，在图表上添加水平横线。单击**添加横线**，可设置横线颜色和对应Y轴的值。 |
    |时序序列|设置X轴为时序字段。|
    |时间格式|设置用于解析时序序列的时间格式。|
    |边距|坐标轴距离图表边界距离，包括**上边距**、**下边距**、**右边距**和**左边距**。|


## 示例

流图适合三维关系的展示，时间-分类-数值的展现。

```
* | select date_format(from_unixtime(__time__ - __time__% 60), '%H:%i:%S') as minute, count(1) as c,  request_method group by minute, request_method order by minute asc limit 100000
```

X轴选择`minute`，Y轴选择`c`，聚合列选择`request_method`。

![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/6516317951/p5737.png)

