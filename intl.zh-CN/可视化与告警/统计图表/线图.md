# 线图

本文介绍线图操作步骤及案例。

## 简介

线图属于趋势类分析图表，一般用于表示一组数据在一个有序数据类别（多为连续时间间隔）上的变化情况，用于直观分析数据变化趋势。在线图中，可以清晰的观测到数据在某一个周期内的变化，主要反映在：

-   递增性或递减性
-   增减的速率情况
-   增减的规律（如周期变化）
-   峰值和谷值

所以，线图是用于分析数据随时间变化趋势的最佳选择。同时，也可以绘制多条线用于分析多组数据在同一时间周期的变化趋势，进而分析数据之间的相互作用和影响（如同增同减，成反比等）。

基本构成如下：

-   X轴
-   左Y轴
-   右Y轴（可选）
-   数据点
-   变化趋势线
-   图例

## 操作步骤

1.  登录[日志服务控制台](https://sls.console.aliyun.com)。

2.  在Project列表区域，单击目标Project。

3.  在**日志存储** \> **日志库**页签中，单击目标Logstore。

4.  输入查询分析语句，选择时间范围后单击**查询/分析**。

5.  在统计图表页签中，单击![折线图](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6620616951/p93114.png)图标。

6.  在**属性配置**页签中，配置图表属性。

    **说明：** 线图单条线的数据记录数要大于2，以免无法分析数据趋势，同时，建议同一个图上不要超过5条线。

    |参数|说明|
    |:-|:-|
    |X轴|一般为有序数据类别（时间序列）。|
    |左Y轴|可以配置一列或多列数据对应到左轴数值区间。|
    |右Y轴|可以配置一列或多列数据对应到右轴数值区间（右轴图层高于左轴）。|
    |为柱列|将已选择的左Y轴或者右Y轴中的一列以柱状形式表示。|
    |图例位置|图例在图表中的位置，可以配置为上、下、左和右。|
    |左Y轴格式化|将Y轴数据按照指定格式进行显示。|
    |右Y轴格式化|
    |左Y轴起始值|自定义设置Y轴最小值。|
    |左Y轴起始值|
    |左Y轴最大值|自定义设置Y轴最大值。|
    |右Y轴最大值|
    |线形|线图显示格式，可选择**直线**或**曲线**。|
    |是否显示点|开启该功能后，显示折线的连接点。|
    |开启指标筛选|开启该功能后，可筛选指标维度。|
    |图例宽度|设置图例宽度。|
    |X轴刻度密度|设置X轴刻度密度，取值范围为3~30。|
    |散点列|选择散点的Y轴数据所在列。|
    |散点数值列|散点列对应值的大小。|
    |散点大小范围|设置散点大小范围。|
    |异常点所在维度|选择需查看的列，可设置其**异常点下界**和**异常点上界**。     -   **异常点下界**：数值小于该设置的值的点会标红。
    -   **异常点上界**：数值大于该设置的值的点会标红。 |
    |区域上界维度|选择需查看的列，其数值点连接形成的区域。|
    |区域下界维度|
    |时间序列|数值按发生的时间先后顺序排列。|
    |时间格式|解析时间序列字段的时间格式。|
    |边距|坐标轴距离图表边界距离，包括上、下、左、右边距。|


## 简单线图示例

查询`10.0.0.0`这个IP地址在最近1天内的访问情况。

```
remote_addr: 10.0.0.0 | select date_format(date_trunc('hour', __time__), '%m-%d %H:%i') 
as time, count(1) as PV group by time order by time limit 1000
```

X轴选择`time`，左Y轴选择`PV`并调整图例位置为下方显示，合理改变间距。

![简单折线图](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3327423061/p5709.png)

## 双轴线图示例

查询最近1天内的访问PV、UV：

```
* | select date_format(date_trunc('hour', __time__), '%m-%d %H:%i') as time, count(1) as PV, approx_distinct(remote_addr) as UV group by time order by time limit 1000
```

X轴选择`time`，左Y轴选择`PV`，右Y轴选择`UV`并指定`UV`为柱状显示。

![双轴折线图](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3327423061/p5710.png)

