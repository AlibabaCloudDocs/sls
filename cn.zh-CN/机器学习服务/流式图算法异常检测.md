# 流式图算法异常检测

流式图算法异常检测采用Time2Graph算法对输入的时序曲线进行分析，将时序数据转化为图（Graph），通过分析图中的异常转移路径，判断当前数据的异常程度。

## 适用场景

-   流式图算法异常检测适用于时序数据变点异常检测。

    ![适用场景](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2366322061/p129183.png)

-   流式图算法异常检测适用于时序数据周期异常检测。

    ![适用场景](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5055863951/p129288.png)


## 参数说明

您在[创建数据加工任务](/cn.zh-CN/数据加工/创建数据加工任务.md)时，可在模型参数配置中选择流式图算法异常检测，用于检测时序数据的变点异常和周期异常。

![参数说明](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2336775161/p129289.png)

流式图算法异常检测相关参数说明如下表所示。

|参数|说明|
|--|--|
|时间列|用于标记时间的名称，所对应字段的值为Unix时间戳。 只支持索引类型为long类型的字段。 |
|时间粒度|数据写入的粒度，即同一个实例中最小的数据间隔，单位：秒。|
|实例列|选择实例列，该字段标记了一条时序曲线的名称。支持多选。 只支持索引类型为text类型的字段。 |
|选择数值列|选择对应的数值列，并配置上届和下届数据。-   上届：自定义阈值，如果您所选择的数值列的值大于该值，则直接判断为异常。
-   下届：自定义阈值，如果您所选择的数值列的值小于该值，则直接判断为异常。 |
|算法类型|选择**流式图算法异常检测**。|
|仅保留异常结果|开启**仅保留异常结果**开关后，只保留异常结果到目标Logstore中。|
|算法检测间隔|指定发起算法检测异常的时间间隔，该值需小于等于时间粒度，单位：秒。|
|数值划分粒度|根据值域划分数据，单位：段，取值范围为\[2,20\]，默认值为5。 分段越多，算法对异常越敏感，检测出的异常点越多。 |
|周期长度|指定时序数据的周期长度，单位：小时，取值范围为\[60, +∞\)，默认为2880个时间点所对应的小时数。 建议设置为两倍的时序数据周期长度。 |

## 输出结果

流式图算法将异常程度量化为具体的分数，写入您指定的目标LogStore中。您可根据业务需求，设置告警。

![流式图-日志字段](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5055863951/p129346.png)

|类型|字段|说明|
|--|--|--|
|entiy|无固定字段|表示一条时序曲线的实例列信息。|
|meta|project\_name|时序数据来源的Project。|
|logstore\_name|时序数据来源的LogStore。|
|results|dim\_name|您所指定的数值列。|
|is\_anomaly|流式图算法判断时序数据是否异常，Bool类型。 流式图算法默认以0.5为界线，如果score值大于0.5，则为异常，显示为true。 |
|score|流式图算法输出的异常程度的量化分数，范围为\[0,1\]，分数越大越异常。-1表示数据缺失。-2表示疑似异常（可能是因为流式图算法还未学习充分）。|

