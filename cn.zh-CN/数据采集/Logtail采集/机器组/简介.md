# 简介

机器组是包含多台服务器的虚拟分组，日志服务通过机器组的方式管理所有需要通过Logtail采集日志的服务器。

日志服务支持通过一个Logtail采集配置来采集多台服务器上的日志，您可以将这些服务器加入到同一个机器组，并将Logtail采集配置应用到该机器组。

您可以通过如下两种方法定义一个机器组。

-   IP地址：在机器组中添加服务器的IP地址，通过IP地址识别服务器。
-   自定义标识：定义属于机器组的一个标识，在对应服务器上配置对应标识进行关联。

**说明：** 如果您的服务器为其他云厂商服务器、自建IDC、其他账号下的ECS，则在添加到机器组前，需先在服务器上配置用户标识，详情请参见[配置用户标识](/cn.zh-CN/数据采集/Logtail采集/机器组/配置用户标识.md) 。

## IP地址机器组

您可以通过添加服务器IP地址的方式，将多台服务器添加到一个机器组中。

-   如果您使用ECS服务器，且没有绑定过主机名、没有更换过网络类型，则可以在机器组中配置ECS服务器的私网IP地址。
-   其他情况下，请在机器组中配置Logtail自动获取到的IP地址。该IP地址记录在服务器app\_info.json文件中的ip字段中。Logtail自动获取服务器IP地址的方式如下所示。
    -   如果已在服务器/etc/hosts文件中设置了主机名与IP地址绑定，则自动获取绑定的IP地址。
    -   如果未在服务器/etc/hosts文件中设置主机名与IP地址绑定，则自动获取本机第一块网卡的IP地址。

**说明：** 采集日志时是否使用阿里云内网，与机器组中填写的IP地址是否为私网IP地址无关。如果您的服务器是阿里云ECS云服务器，并且安装Logtail时选择**阿里云内网（经典网络/VPC）**模式，才会通过阿里云内网采集日志到日志服务。

## 自定义标识机器组

使用自定义标识动态定义机器组，在以下场景中具有明显优势。

-   VPC等自定义网络环境中，可能出现不同服务器IP地址冲突的问题，导致日志服务无法管理Logtail。使用自定义标识可以避免此类情况的发生。
-   多台服务器通过同一个自定义标识实现机器组弹性伸缩。您只需为新增的服务器配置相同的自定义标识，日志服务可自动识别，并将其添加至机器组中。

通常情况下，系统由多个模块组成，每个模块都可以进行独立的水平扩展，即支持添加多台服务器。为每个模块分别创建机器组，可以实现日志分类采集。因为需要为每个模块分别定义自定义标识，即在各个模块的服务器上配置各自所属的自定义标识。例如常见网站分为前端HTTP请求处理模块、缓存模块、逻辑处理模块和存储模块，其自定义标识可以分别定义为http\_module、cache\_module、logic\_module和store\_module。

