# 使用前须知

阿里云关系型数据库RDS联合日志服务推出RDS SQL审计日志投递功能，将RDS SQL审计日志投递到日志服务中。日志服务提供实时查询、可视化分析、告警、投递、加工等功能。本文介绍RDS SQL审计日志相关的资产详情、费用说明、使用限制等信息。

## 支持的日志类型

RDS SQL审计日志记录了对数据库执行的所有操作，这些信息是系统通过网络协议分析所得，对系统CPU消耗极低，不影响SQL执行效率。RDS SQL审计日志包括但不限于如下操作：

-   数据库的登录和退出操作。
-   DDL（Data Definition Language）操作：对数据库结构定义的SQL语句，包括CREATE、ALTER DROP、TRUNCATE、COMMENT等。
-   DML（Data Manipulation Language）操作：SQL操作语句，包括SELECT、INSERT、UPDATE、DELETE等。
-   其他SQL执行操作，包括任何其他通过SQL执行的控制，例如回滚、控制等。
-   SQL执行的延迟、执行结果、影响的行数等信息。

## 资产详情

-   自定义日志服务Project和Logstore

    **说明：** 请勿删除RDS SQL审计日志对应的日志服务Project和Logstore，否则将无法正常推送日志到日志服务。

-   专属仪表盘

    默认生成3个仪表盘。

    **说明：** 专属仪表盘可能随时进行升级与更新，建议您不要修改专属仪表盘。您可以自定义仪表盘用于查询结果展示。更多信息，请参见[创建仪表盘](/cn.zh-CN/可视化/创建仪表盘.md)。

    |仪表盘|说明|
    |---|--|
    |RDS审计运营中心|展示整体访问情况、活跃数据库等信息，包括操作的数据库数量、操作表格数、执行错误、累计插入行数、累计更新行数、累计删除行数、累计查询行数等。|
    |RDS审计性能中心|展示运维可靠性相关指标，包括SQL执行峰值、查询带宽峰值、插入开端峰值、更新带宽峰值、删除带宽峰值、SQL平均时间、查询SQL平均时间、更新SQL平均时间、删除SQL平均时间等。|
    |RDS审计安全中心|展示数据库安全相关指标，包括错误数、登录失败次数、大批量删除事件、大批量修改事件数、危险SQL执行次数、错误操作类型分布、出错客户端外网分布、错误最多的客户端等。|


## 费用说明

-   开启SQL审计（PostgreSQL、SQL Server）或SQL洞察（MySQL）功能后，RDS开始按量计费（每小时费用 = 每小时扣费时的审计日志总量 x 单价）。

    **说明：** 三节点企业版（原金融版）实例的SQL洞察功能免费。

-   投递日志到日志服务后，日志服务根据存储空间、读取流量、请求数量、数据加工、数据投递等进行收费，费用说明请参见[按量付费](/cn.zh-CN/产品计费/按量付费.md)。

## 限制说明

-   目前支持投递SQL审计日志到日志服务的RDS类型如下所示。
    -   MySQL：基础版本不支持，其他在售版本均支持。
    -   PostgreSQL、SQL Server：所有在售版本均支持。
-   开启SQL审计（PostgreSQL、SQL Server）或SQL洞察（MySQL）功能的RDS实例才能投递SQL审计日志到日志服务。
-   RDS实例和日志服务Project需处于同一地域。
-   除本地云以外的其他地域都支持。

## RDS审计中心

目前，日志服务还推出了RDS审计中心，用于接入RDS SQL日志，支持自动采集、易用性提升，推荐您使用RDS审计中心方式。更多信息，请参见[RDS审计中心](/cn.zh-CN/应用中心（App）/RDS审计中心/使用前须知.md)。

RDS审计中心方式和接入数据-RDS审计方式中的采集配置是互通的，两者主要区别如下：

|属性|接入数据-RDS审计|RDS审计中心|
|--|----------|-------|
|指定RDS实例粒度|支持|支持|
|灵活指定存储目标库|支持|支持|
|自动采集|不支持|支持|
|手动采集|支持|支持|
|查看采集状态视图|不支持|支持|

