# 使用前须知

阿里云关系型数据库RDS联合日志服务推出RDS SQL审计日志投递功能，将RDS SQL审计日志投递到日志服务中。日志服务提供实时查询、可视化分析、告警、投递、加工等功能。本文介绍RDS SQL审计日志相关的资产详情、费用说明、使用限制等信息。

## RDS SQL审计日志说明

RDS SQL审计日志记录了对数据库执行的所有操作，这些信息是系统通过网络协议分析所得，对系统CPU消耗极低，不影响SQL执行效率。RDS SQL审计日志包括但不限于如下操作：

-   数据库的登录和退出操作。
-   DDL（Data Definition Language）操作：对数据库结构定义的SQL语句，包括CREATE、ALTER DROP、TRUNCATE、COMMENT等。
-   DML（Data Manipulation Language）操作：SQL操作语句，包括SELECT、INSERT、UPDATE、DELETE等。
-   其他SQL执行操作，包括任何其他通过SQL执行的控制，例如回滚、控制等。
-   SQL执行的延迟、执行结果、影响的行数等信息。

## 资产详情

-   自定义日志服务Project和Logstore

    **说明：** 请勿删除RDS SQL审计日志对应的日志服务Project和Logstore，否则将无法正常推送日志到日志服务。

-   专属仪表盘

    默认生成3个仪表盘。

    **说明：** 专属仪表盘可能随时进行升级与更新，建议您不要修改专属仪表盘。您可以自定义仪表盘用于查询结果展示，详情请参见[创建仪表盘](/cn.zh-CN/可视化与告警/仪表盘/创建仪表盘.md)。

    |仪表盘|说明|
    |---|--|
    |RDS审计运营中心|展示整体访问情况、活跃数据库等信息，包括操作的数据库数量、操作表格数、执行错误、累计插入行数、累计更新行数、累计删除行数、累计查询行数等。|
    |RDS审计性能中心|展示运维可靠性相关指标，包括SQL执行峰值、查询带宽峰值、插入开端峰值、更新带宽峰值、删除带宽峰值、SQL平均时间、查询SQL平均时间、更新SQL平均时间、删除SQL平均时间等。|
    |RDS审计安全中心|展示数据库安全相关指标，包括错误数、登录失败次数、大批量删除事件、大批量修改事件数、危险SQL执行次数、错误操作类型分布、出错客户端外网分布、错误最多的客户端等。|


## 费用说明

-   开启SQL审计（PostgreSQL、SQL Server）或SQL洞察（MySQL）功能后，RDS开始按量计费（每小时费用 = 每小时扣费时的审计日志总量 x 单价）。

    **说明：** 三节点企业版（原金融版）实例的SQL洞察功能免费。

-   投递日志到日志服务后，日志服务根据存储空间、读取流量、请求数量、数据加工、数据投递等进行收费，费用说明请参见[按量付费](/cn.zh-CN/产品定价/按量付费.md)。

## 限制说明

-   目前支持投递SQL审计日志到日志服务的RDS类型如下所示。
    -   MySQL：基础版本不支持，其他在售版本均支持。
    -   PostgreSQL、SQL Server：所有在售版本均支持。
-   开启SQL审计（PostgreSQL、SQL Server）或SQL洞察（MySQL）功能的RDS实例才能投递SQL审计日志到日志服务。
-   RDS实例和日志服务Project需处于同一地域。
-   目前仅支持华北 1（青岛）、华北 2（北京）、华东 1（杭州）、华东 2（上海）、华南 1（深圳）、中国（香港）地域的RDS实例。

    日志服务的日志审计服务也支持接入RDS SQL审计日志，并且支持更全面的地域，详情请参见[日志审计服务](/cn.zh-CN/应用中心（App）/日志审计服务/简介.md)。


## 功能优势

-   配置简单：轻松配置即可实时采集RDS SQL审计日志，对现有数据库无性能影响。
-   实时分析：依托日志服务，提供实时日志分析，并提供开箱即用的报表中心，让您对SQL执行行为、性能、安全问题了如指掌。
-   实时告警：支持基于特定指标定制近实时的监测与告警，确保SQL执行异常时及时响应。
-   生态体系：支持对接其他生态如流计算、云存储、可视化方案，进一步挖掘数据价值。

