# 简介 {#concept_263516 .concept}

阿里云关系数据库RDS（MySQL版本）的SQL执行日志已经与日志服务打通，提供准实时的SQL执行分析功能，并提供内置可深钻的报表、支持自定义审计规则、异常报警、报表订阅与生态对接能力等。

## 背景信息 {#section_xxw_uwg_m7i .section}

数据库是企业业务的核心，对数据库的操作行为尤其是所有SQL的执行行为进行记录并审计的日志，就显得尤为重要。另一方面，数据库SQL执行日志也提供了性能、执行结果以及归类等信息，对于排查错误、线上性能优化有关键作用。

阿里云关系数据库RDS的SQL执行日志已经与日志服务打通，提供准实时的SQL执行分析功能。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/217706/155842137347248_zh-CN.png)

## 完备的SQL执行日志 {#section_53a_06u_awv .section}

SQL执行日志包括了对数据库进行的所有SQL操作，RDS提供的SQL执行日志，通过网络监听的方式收集，对实际执行几乎没有性能的影响，包括但不限于如下类型的SQL执行以及信息提取：

-   数据库的登录、退出。
-   DDL（Data Definition Language）：对数据库结构定义的SQL，例如CREATE、ALTER DROP、TRUNCATE、COMMENT等。
-   DML（Data Manipulation Language）：SQL操作语句，包括SELECT、INSERT、UPDATE、DELETE等。
-   其他SQL执行，包括任何其他通过SQL执行的控制，例如回滚、控制等。
-   失败的SQL执行也会被记录。
-   对SQL执行的延迟、执行结果、影响的行数等信息的提取。

## 功能优势 {#section_z3z_lgb_4rd .section}

将阿里云RDS的实时SQL执行投递到日志服务中有如下价值与优势：

-   **简单**：轻松配置，即可准实时采集SQL执行日志导入到日志服务。
-   **可靠**：对现有数据库支持无性能影响，数据准实时接入，分钟级别延迟。
-   **信息充分**：除了执行的SQL之外，也包括数据库登录、失败的数据执行、延迟、影响结果等，对数据库执行状况、性能、潜在安全问题了如指掌。
-   **强大**：依托日志服务，提供实时日志分析，并提供开箱即用的报表中心，且支持定制等。
-   **灵活**：支持基于特定指标定制准实时监测、报警、报表订阅，确保关键业务异常时可以及时响应。可对接其他生态如流计算、云存储、可视化方案，进一步挖掘数据价值。或使用日志服务机器学习、自定义报表、数据加工等一站式服务。
-   **成本优势**：每1000万条SQL执行日志存储一个月，每天只需2毛钱左右。

## 限制说明 {#section_ibi_2nf_46q .section}

-   使用SQL审计与分析功能，需要开通阿里云日志服务。
-   开通阿里云RDS服务，创建一个支持[SQL审计](../../../../cn.zh-CN/RDS for MySQL 用户指南/数据安全性/SQL审计.md#)或者[SQL洞察](../../../../cn.zh-CN/RDS for MySQL 用户指南/SQL洞察.md#)的MySQL实例。
-   开启投递时需要开启标准版RDS的[SQL审计](../../../../cn.zh-CN/RDS for MySQL 用户指南/数据安全性/SQL审计.md#)功能。如果您开启了试用版本的SQL审计，控制台会开启投递失败。
-   目前支持自动投递到日志服务的RDS类型如下：

    |限制|描述|备注|
    |--|--|--|
    |类型|MySQL|其他类型暂不支持|
    |地域|北京，上海，杭州，深圳，香港，青岛|其他地域暂不开放|
    |版本|5.5、5.6、5.7、8.0|8.0版本当前还是beta版本|
    |系列|高可用版、金融版|-|
    |存储类型|本地SSD|-|

-   目前仅支持投递到同一个地域下的日志服务项目（例如，北京的RDS实例，只能投递到北京的日志服务日志库中）。
-   请勿修改默认的仪表盘配置，默认仪表盘会随着功能升级自动更新。

## 适用客户 {#section_xpv_b73_tqw .section}

-   合规：对SQL执行日志存储有更长存储合规需求的大型企业与机构，如金融公司、政府类机构等。
-   高级运维：需要对数据库状况做实时监测，并对业务上出现的性能、可靠、稳定性等异常问题能够进行快速排错的客户，需要使用日志服务的实时交互式的统计、查询分析和报警功能，如互联网服务、金融等企业。
-   安全：需要对数据库安全进行审计，辅助数据安全防护和事后排查的公司，需要使用日志服务的实时查询分析功能，如金融、证券、电商、游戏等公司。
-   行为分析：需要对数据库操作行为进行分析，做进一步性能、功能、体验调优的参考和验证，除了统计查询外，也需要对接外部系统做进一步深度分析的公司。

## 应用场景 {#section_kbi_4gv_zsp .section}

-   自由交互式分析SQL执行

    准实时数据库访问异常排查与问题分析，读写延时，访问客户端区域分布等。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/217706/155842137347307_zh-CN.png)

    也支持标准SQL92语法，并融合多种扩展分析函数，参考[查询分析日志](cn.zh-CN/用户指南/查询与分析/简介.md#)。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/217706/155842137347308_zh-CN.png)

-   安全分析

    重要表格异常删除、SQL攻击以及SQL注入等一目了然。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/217706/155842137447309_zh-CN.png)

    也可以在日志查询分析的结果上，支持自定义SQL执行审计与告警通知，以便第一时间处理，日志服务支持多种告警模式，例如钉钉、短信等，并支持自定义告警内容模板：

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/217706/155842137447310_zh-CN.png)

-   整体访问监控程度

    整体访问监控程度，运维可靠性指标一目了然，并可以参考，构建自己的仪表大盘。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/217706/155842137447311_zh-CN.png)

-   运营分析

    活跃数据库与表格，关键数据添加，修改，删除动向。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/217706/155842137447312_zh-CN.png)


