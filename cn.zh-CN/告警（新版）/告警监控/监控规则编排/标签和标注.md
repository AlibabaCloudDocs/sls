# 标签和标注

在创建告警监控规则时，您可以设置标签（labels）和标注（annotations）信息。标签主要应用于告警的降噪、通知路由和管理分派等场景，标注主要应用于内容模板、管理分派等场景。本文介绍标签和标注的基本知识和使用场景。

## 标签

标签主要有如下特征：

-   触发告警的标识性属性，键值对格式。告警指纹的一部分，可以用于告警去重。例如主机为Host1，则其标签信息为`"labels": {"host": "host1"}`，告警管理可根据此标签对告警进行去重。
-   可在告警内容模板中通过`${labels}`引用。
-   在告警管理和行动管理中根据标签属性进行管理和分派。
-   在告警策略中，可作为降噪控制的合并基准。

    ![labels](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8285548161/p264197.png)

-   分组评估指定的字段会自动成为标签。
-   标签为静态文本。支持自定义标签，触发的告警会自动添加该标签为告警属性。

例如，在创建告警监控规则时，可以添加如下标签。告警管理在降噪控制时，可将有“小组”标签的告警做静默处理。

![biaoqian](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0924128161/p262329.png)

## 标注

标注主要有如下特征：

-   触发告警的非标识性属性，键值对格式，值可以是动态的。例如标注为`"annotations": {"title": "${service} CPU使用率过高","desc": "${service} CPU当前使用率为90%"}`。
-   在配置标注内容时可引用分组中的字段变量，具体值会替换为触发告警时对应的属性值。
-   在告警管理和行动管理中根据标注属性进行管理和分派。
-   固定有title和desc两个属性。
    -   title是告警固定的非标识性属性，可以在通知内容模板中以$\{annotations.title\}被引用。
    -   desc是告警固定的非标识性属性，可以在通知内容模板中以$\{annotations.desc\}被引用。

例如，在创建告警监控规则时，可以添加如下标注。通知管理在进行告警通知时，可直接在内容模板中引用标注内容。

![biaozhu](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0924128161/p262331.png)

在标注的属性值中，可以使用如下内置变量：

|变量|标注|
|--|--|
|\_\_count\_\_|分组后每组扫描的行数（不分组默认所有数据在一个组）|
|\_\_pass\_count\_\_|分组后每组满足条件的行数（不分组默认所有数据在一个组）|
|\_\_0\_count\_\_|第一个查询结果的行数|
|\_\_1\_count\_\_|第二个查询结果的行数|
|\_\_2\_count\_\_|第三个查询结果的行数|
|aliuid|阿里云账号ID|
|alert\_instance\_id|告警触发的实例的ID|
|alert\_id|告警规则ID|
|alert\_name|告警规则名称|
|project|告警规则所在Project|

