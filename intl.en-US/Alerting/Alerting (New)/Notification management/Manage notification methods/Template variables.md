# Template variables

This topic describes available template variables and the methods to reference the variables.

## Reference methods

When you configure an action policy, you must select an alert template. The template is used to define the content and subject of alert notifications. When you specify the **Content** and **Subject** parameters, you can use the $\{fieldName\} syntax to reference a template variable. Log Service replaces variables in the title or content with actual values before sending alert notifications. For example, Log Service replaces $\{Project\} with the name of the project to which the alert rule belongs.********

**Note:** You must reference valid variables. If a referenced variable does not exist or is invalid, Log Service processes the variable as an empty string. If a variable references a value of the object type, the value is converted to a JSON string.

## Available variables and reference examples

The following table describes the available variables and how to reference these variables.

|Variable|Description|Sample value|Reference example|
|:-------|:----------|:-----------|:----------------|
|aliuid|The ID of the Alibaba Cloud account to which the project belongs.|1234567890|An alert is triggered for the Alibaba Cloud account $\{Aliuid\}.|
|alert\_instance\_id|The ID of the instance that triggers the alert.|ee16a8f435485f3f-5be6b81edc520-3d69233|The instance ID is $\{alert\_instance\_id\}.|
|project|The project to which the alert rule belongs.|my-project|An alert is triggered in the $\{Project\} project.|
|alert\_id|The ID of the alert rule. The ID is unique within a project.|0fdd88063a611aa114938f9371daeeb6-1671a52eb23|The alert rule ID is $\{alert\_id\}.|
|alert\_type|-   sls\_alert: indicates that the alert is generated by the Log Service alerting service.
-   sls\_pub: indicates that the alert is generated by an external alerting service.

|sls\_alert|The alert type is $\{alert\_type\}.|
|alert\_name|The name of the alert rule.|new2|The $\{AlertName\} alert rule is triggered.|
|next\_eval\_interval|The interval before the next evaluation.|900|The next evaluation is implemented $\{next\_eval\_interval\} seconds later.|
|alert\_time|The time when the evaluation is implemented.|1616744734|The evaluation is implemented at $\{alert\_time\}.|
|fire\_time|The time when the alert rule is first triggered.|1616059834|The alert rule is first triggered at $\{fire\_time\}.|
|status|The status of the alert. Valid values include firing and resolved.|firing|The alert status is $\{status\}.|
|resolve\_time|The time when an alert is cleared. -   If the alert status is firing, this value is 0.
-   If the alert status is resolved, this value is a specific time.

|0|The alert is cleared at $\{resolve\_time\}.|
|results|The result of a query. This variable is of the array type. For information about the fields in the results variable, see [Data structure of the results variable](#section_5op_xn7_tbw).|```
[
{
"store_type": "log",
"region": "cn-hangzhou",
"project": "sls-alert-test",
"store": "test",
"query": "* | select count(1) as cnt",
"start_time": 1616741485,
"end_time": 1616745085,
"dashboard_id": "mydashboard",
"raw_results": [{"cnt": "4"}],
"raw_result_count": 1,
"fire_result": {"cnt": "4"},
"truncated": false,
"role_arn": ""
}
]
```

|The time range to query for the first query statement is from $\{results\[0\].start\_time\} to $\{results\[0\].end\_time\}. The value of the count field is $\{results\[0\].fire\_result.count\}. **Note:** In this example, 0 indicates the serial number of a query statement. The serial number of a query statement is the same as the serial number of the chart that plots the result of the query statement. For more information, see [How can I view the serial number of a chart?](/intl.en-US/Alerting/Alerting (Old)/Relevant syntax and fields for reference/Syntax of trigger conditions in alert rules.md) |
|labels|The list of tags.|\{"env":"test"\}|The alert tag is $\{labels\}.|
|annotations|The list of annotations.|\{ "title": "Alert title","desc": "Alert description"\}|The alert annotation is $\{annotations\}.|
|severity|The severity of the alert. Valid values include 10 \(Critical\), 8 \(High\), 6 \(Medium\), 4 \(Low\) and 2 \(Report\).|10|The alert severity is $\{severity\}.|
|policy|The alert policy or action policy. For more information, see [Data structure of the policy variable](#section_el1_n7b_2fy).|```
{"alert_policy_id": "sls.test-alert","action_policy_id": "sls.test-action","use_default": false,"repeat_interval": "6m0s"}
```

|The alert policy ID is $\{policy.alert\_policy\_id\}.|
|region|The region to which the alert rule belongs.|cn-hangzhou|The region to which the alert rule belongs is $\{region\}.|
|drill\_down\_query|The query statement for drill-down analysis. For custom alerts, this value is empty. The variable is applicable to the alert templates of Log Audit Service, Cost Manager, and Log Center.|\* \| select count\(1\) as cnt|None|
|alert\_url|The URL of the alert.|https://sls.console.aliyun.com/lognext/project/test-xxxx/alert/alert-1617164106-940166|The alert URL is $\{alert\_url\}.|
|query\_url|The URL of the first query page in query statistics.|https://sls-stg.console.aliyun.com/lognext/project/test-xxx/logsearch/test-alert-access?encode=base64&endTime=1617175989&queryString=KiB8IHNlbGVjdCBjb3VudCgxKSBhcyBjbnQ%3D&queryTimeType=99&startTime=1617175089|The URL of the first query page in query statistics is: $\{query\_url\}.|
|alert\_history\_dashboard\_url|The URL of the alert history statistics.|https://sls.console.aliyun.com/lognext/project/test-xx/dashboard/internal-alert-analysis|The URL of the alert history statistics is $\{alert\_history\_dashboard\_url\}.|
|condition|The trigger condition of the alert rule. Variables in the trigger condition are replaced with the values that trigger the alert. Each value is enclosed in a pair of brackets \[\]. Format: `Count: quantity expression; Condition: matching expression`.|`Count:[5] > 3;Condition:[www.mro.mock.com]=='www.mro.mock.com'`|The trigger condition of the alert rule is $\{condition\}.|
|raw\_condition|The original trigger condition of the alert rule. Variables in the trigger condition are not replaced with actual values. Format: `Count: quantity expression; Condition: matching expression`.|`Count:__count__ > 3;Condition:host=='www.mro.mock.com'`|The original trigger condition is $\{raw\_condition\}.|
|dashboard|The ID of the dashboard with which the alert rule is associated.|mydashboard|The alert rule is associated with the $\{dashboard\} dashboard.|
|dashboard\_url|The URL of the dashboard with which the alert rule is associated.|https://sls.console.aliyun.com/next/project/myproject/dashboard/mydashboard|The URL of the dashboard with which the alert rule is associated is $\{dashboard\_url\}.|
|fire\_results|The data that triggers the alert. A maximum of 100 data records are displayed.|`[{"host":"www.xhu.mock.com","host__1":"www.iks.mock.com","pv":"836","slbid":"slb-02","status":"200"},{"host":"www.ykw.mock.com","host__1":"www.iks.mock.com","pv":"836","slbid":"slb-02","status":"200"},{"host":"www.mro.mock.com","host__1":"www.iks.mock.com","pv":"836","slbid":"slb-02","status":"200"},{"host":"www.amh.mock.com","host__1":"www.iks.mock.com","pv":"836","slbid":"slb-02","status":"200"},{"host":"www.uua.mock.com","host__1":"www.ue.mock.com","pv":"780","slbid":"slb-01","status":"200"}]`|The data that triggers the alert is $\{fire\_results\}.|
|fire\_results\_count|The total number of data records that trigger the alert. The value may be larger than 100, for example, when you perform the Cartesian product operation on two sets of data records.|3|The total number of data records that trigger the alert is $\{fire\_results\_count\}.|

## Data structure of the policy variable

|Field|Description|Example|
|-----|-----------|-------|
|alert\_policy\_id|The ID of the alert policy.|sls.test-alert|
|action\_policy\_id|The ID of the action policy that is specified in the alert rule. This field is available only when you associate an alert policy with a dynamic action policy.|sls.test-action|
|repeat\_interval|The interval between repeated alerts. This field is available only when you associate an alert policy with an action policy.|4h|

## Data structure of the results variable

The following table describes the fields in the results variable.

|Field|Description|Example|
|-----|-----------|-------|
|role\_arn|The service-linked role.|acs:ram::1234567890:role/aliyunslsalertmonitorrole|
|store\_type|The storage type. -   log: Log Service query statement
-   metric: Log Service time series data
-   meta: resource data

|log|
|region|The region where the destination database is located. If the value of the store\_type field is meta, this field is empty.|cn-hangzhou|
|project|The project where the destination database is located. If the value of the store\_type field is meta, this field is empty.|sls-test-alert|
|store|The name of the destination database.|test-logstore|
|query|The query statement.|error \| select count\(1\) as cnt|
|start\_time|The beginning of the time range to query. If the value of the store\_type field is meta, this field is empty.|2006-01-02 15:04:05|
|start\_time\_ts|The beginning of the query time range. The value is a UNIX timestamp. If the value of the store\_type field is meta, this field is empty.|1616741485|
|end\_time|The end of the time range to query. If the value of the store\_type field is meta, this field is empty.|2006-01-02 15:04:05|
|end\_time\_ts|The beginning of the query time range. The value is a UNIX timestamp. If the value of the store\_type field is meta, this field is empty.|1616745085|
|dashboard\_id|The ID of the dashboard that is associated with the alert rule.|mydashboard|
|raw\_results|The data to query. This field is of the array type. A maximum of 100 data records are retrieved.|`[{"host":"www.zc.mock.com","slbid":"slb-02","status":"200"},{"host":"www.evi.mock.com","slbid":"slb-01","status":"200"},{"host":"www.fo.mock.com","slbid":"slb-02","status":"306"},{"host":"www.gnp.mock.com","slbid":"slb-02","status":"200"},{"host":"www.tha.mock.com","slbid":"slb-01","status":"200"},{"host":"www.aoi.mock.com","slbid":"slb-02","status":"200"}]`|
|fire\_result|The first data record that triggers the alert. A query result may contain multiple data records. This field shows the first data record.|`{"host":"www.zc.mock.com","slbid":"slb-02","status":"200"}`|

